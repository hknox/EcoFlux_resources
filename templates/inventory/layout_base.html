<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load django_bootstrap5 %}
    {% bootstrap_css %}

    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css"
      integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E="
      crossorigin="anonymous">
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_blue.css">
    <!-- Turn off crispy-forms asterisks for required fields -->
    <style>
      .asteriskField {
          display: none;
      }
    </style>

    {% block extra_css %}
    {% endblock %}

    {# This can be overridden: #}
    <title>{% block title %}EcoFlux{% endblock %}</title>
  </head>

  <body>
    <!-- Fixed Banner -->
    <header class="sticky-top text-bg-primary text-white p-1 shadow-sm" >
      <div class="container-fluid d-flex justify-content-between align-items-center">
        <!-- Logo -->
        <a href="{% url 'home' %}" class="d-flex align-items-center text-white text-decoration-none">
          <img src="{% static 'images/EcoFlux_logo_smaller.png' %}"
               alt="EcoFlux Logo" class="me-3 py-2 img-fluid"
               style="width: 60px">
          <span class="fs-2 fw-bold">{% block page_heading %}EcoFlux Lab{% endblock %}</span>
        </a>
        <!-- Conditional Links (Collapsible for Mobile)-->
        <nav class="d-flex align-items-center">
          {% if user.is_authenticated %}
          <span class="me-3">Hello, <strong>{{user.username}}</strong>!</span>
          <a href="{% url 'view_sites' %}" class="text-white me-3">Sites</a>
          <!-- Need to fix this eventually -->
          <a href="{% url 'home' %}" class="text-white me-3">Inventory</a>
          <a href="{% url 'view_fieldnotes' %}" class="text-white me-3">Field notes</a>
          <a href="{% url 'photos' %}" class="text-white me-3">Photos</a>
          {% if user.is_superuser %}
          <a href="{% url 'admin:index' %}"
             class="text-white me-3">User Admin</a>
          {% endif %}
          <!-- Logout Form Styled as a Button -->
          <form id="logout-form"
                method="post"
                action="{% url 'logout' %}"
                class="d-inline;">
            {% csrf_token %}
            <button type="submit"
                    class="btn btn-light btn-sm text-primary
                           fw-bold mb-1">Logout
            </button>
          </form>
          {% endif %}
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container-fluid flex-grow-1">
        {% block content %}
        {% endblock %}
    </main>

    <!-- <\!-- Footer -\-> -->
    <!-- <footer class="bg-primary text-white py-3 mt-5 fixed-bottom"> -->
    <!--   <div class="container text-center"> -->
    <!--     <p class="mb-0">&copy; 2025 Hank Knox. All rights reserved.</p> -->
    <!--   </div> -->
    <!-- </footer> -->


    {% bootstrap_javascript %}

    {% load static %}
    <!-- Inventory app JavaScript -->
    <script src="{% static 'js/form_protect.js' %}"></script>
    <!-- For Bootstrap tooltips -->
    <script>
      // for older browsers (pre-2015):
      // const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggl
      const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      /*
      Each HTML element, tooltipTriggerEl, should have a 'title'
      attribute that will be used as the tooltip. If you don't need to
      manipulate the tooltips after creation, you can safely omit the
      assignment of the mapped tooltopTriggerList to the tooltipList
      array.
      */
      const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    </script>
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    {% block extra_js %}
    {% endblock %}

  </body>
</html>
