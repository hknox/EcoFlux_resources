{% extends "inventory/layout_base.html" %}

{% load django_bootstrap5 %}
{% load crispy_forms_tags static %}

{% block extra_css %}
{% endblock %}

{% block page_heading %} - {{action}} Photo{% endblock %}

{% block content %}

<form id="id_photo_form" class = "mt-3 track-unsaved form-class"
      data-form-name = "Photo form" novalidate method="post">

  {% csrf_token %}
  {% crispy form %}

  <input type="hidden" name="next" value="{{ request.GET.next|default:'' }}">

  <div class="mb-3 text-center">
    {% if photo.photo %}
    <a href="{{ photo.photo.url }}" target="_blank">
      <img src="{{ photo.photo.url }}"
        alt="{{ photo }}"
        class="img-fluid rounded shadow-sm"
        style="max-height: 400px; object-fit: contain;">
    </a>
    <div class="form-text">Click the image to view full size</div>
    {% else %}
    <div class="border rounded bg-light p-5 text-muted d-flex flex-column align-items-center">
      <i class="bi bi-image-alt display-4 mb-2"></i>
      <div>No image available</div>
    </div>
    {% endif %}
  </div>

  {% include "inventory/include/messages.html" %}

  <!-- Save/Cancel/Delete buttons -->
  {% include "inventory/include/save_cancel_delete.html" %}

</form>

{% endblock content %}

{% block extra_js %}
{% include "inventory/include/flatpickr.html" %}
<script src="{% static 'js/delete_button.js' %}"></script>
{% endblock extra_js %}
